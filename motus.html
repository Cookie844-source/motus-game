<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Motus - Mot √† deviner : IL√âA</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 400px;
      margin: auto;
      background: #f0f0f0;
    }
    h1 {
      text-align: center;
    }
    #game {
      margin-top: 20px;
    }
    .row {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
    }
    .letter {
      width: 40px;
      height: 40px;
      line-height: 40px;
      margin: 0 5px;
      font-weight: bold;
      font-size: 24px;
      text-align: center;
      border: 2px solid #ccc;
      text-transform: uppercase;
      user-select: none;
      border-radius: 5px;
    }
    .correct {
      background-color: #4CAF50; /* vert */
      color: white;
      border-color: #4CAF50;
    }
    .present {
      background-color: #FFC107; /* orange */
      color: white;
      border-color: #FFC107;
    }
    .absent {
      background-color: #ddd;
      color: #666;
      border-color: #ddd;
    }
    #inputRow {
      margin-top: 20px;
      text-align: center;
    }
    input[type="text"] {
      font-size: 20px;
      padding: 5px 10px;
      width: 180px;
      text-transform: lowercase;
    }
    button {
      font-size: 20px;
      padding: 5px 15px;
      margin-left: 10px;
      cursor: pointer;
    }
    #message {
      margin-top: 15px;
      text-align: center;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Motus - Devine le mot (4 lettres)</h1>
  <div id="game"></div>

  <div id="inputRow">
    <input type="text" id="guessInput" maxlength="4" placeholder="Ton mot..." autofocus />
    <button id="submitBtn">Essayer</button>
  </div>
  <div id="message"></div>

  <script>
    const secretWord = 'il√©a';
    const maxAttempts = 6;
    let attempts = 0;

    const gameDiv = document.getElementById('game');
    const input = document.getElementById('guessInput');
    const btn = document.getElementById('submitBtn');
    const messageDiv = document.getElementById('message');

    // Affiche une ligne de lettres avec style selon r√©sultat
    function displayGuess(guess) {
      const row = document.createElement('div');
      row.className = 'row';

      const secretArr = secretWord.split('');
      const guessArr = guess.split('');

      // Pour g√©rer les lettres d√©j√† compt√©es pour 'present'
      let secretLetterCount = {};
      secretArr.forEach(letter => {
        secretLetterCount[letter] = (secretLetterCount[letter] || 0) + 1;
      });

      // √âtape 1 : d√©tecter les lettres bien plac√©es
      let letterStates = guessArr.map((letter, i) => {
        if (letter === secretArr[i]) {
          secretLetterCount[letter]--;
          return 'correct';
        }
        return null;
      });

      // √âtape 2 : d√©tecter les lettres pr√©sentes mal plac√©es
      letterStates = letterStates.map((state, i) => {
        if (state === null) {
          let letter = guessArr[i];
          if (secretLetterCount[letter] > 0) {
            secretLetterCount[letter]--;
            return 'present';
          } else {
            return 'absent';
          }
        } else {
          return state;
        }
      });

      // Cr√©ation des div lettres stylis√©es
      for (let i = 0; i < guessArr.length; i++) {
        const letterDiv = document.createElement('div');
        letterDiv.className = 'letter ' + letterStates[i];
        letterDiv.textContent = guessArr[i].toUpperCase();
        row.appendChild(letterDiv);
      }

      gameDiv.appendChild(row);
    }

    function resetInput() {
      input.value = '';
      input.focus();
    }

    function checkGuess() {
      let guess = input.value.trim().toLowerCase();

      if (guess.length !== secretWord.length) {
        messageDiv.textContent = 'Le mot doit faire 4 lettres.';
        return;
      }

      // Optionnel : v√©rifier que le mot est valide, ici on accepte tout
      attempts++;

      displayGuess(guess);

      if (guess === secretWord) {
        messageDiv.textContent = `Bravo ! Tu as devin√© le mot en ${attempts} essai(s) üéâ`;
        input.disabled = true;
        btn.disabled = true;
      } else if (attempts >= maxAttempts) {
        messageDiv.textContent = `Perdu ! Le mot √©tait "${secretWord.toUpperCase()}"`;
        input.disabled = true;
        btn.disabled = true;
      } else {
        messageDiv.textContent = `Essaie encore (${maxAttempts - attempts} essais restants)`;
      }

      resetInput();
    }

    btn.addEventListener('click', checkGuess);

    input.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        checkGuess();
      }
    });
  </script>
</body>
</html>
