<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Motus Il√©a</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #121212;
      color: white;
      text-align: center;
      padding: 50px;
    }
    input {
      padding: 10px;
      font-size: 1.5em;
      text-align: center;
      width: 200px;
      margin: 10px;
      border-radius: 10px;
      border: none;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      margin-top: 20px;
      border: none;
      border-radius: 8px;
      background-color: #00b894;
      color: white;
      cursor: pointer;
    }
    .result span {
      margin: 0 4px;
      padding: 6px 12px;
      font-weight: bold;
      border-radius: 8px;
      display: inline-block;
    }
    .green { background-color: green; }
    .orange { background-color: orange; }
    .gray { background-color: #555; }
    .letters {
      margin-top: 20px;
      font-size: 2em;
      letter-spacing: 10px;
    }
    #timer {
      font-size: 1.5em;
      margin-bottom: 10px;
      color: #f1c40f;
    }
  </style>
</head>
<body>
  <h1>üéØ MOTUS - D√âFI IL√âA</h1>
  <div id="timer">Temps restant : 2:00</div>
  <p id="instruction">√âtape 1 : Devine le mot myst√®re</p>
  <input type="text" id="guess" placeholder="Tape ici" autofocus />
  <div class="result" id="result"></div>
  <div id="message"></div>
  <div class="letters" id="secretLetters"></div>
  <button id="rejouer" class="hidden" onclick="location.reload()">üîÅ Rejouer</button>

  <!-- Sons -->
  <audio id="success-sound" src="success.mp3"></audio>
  <audio id="error-sound" src="error.mp3"></audio>
  <audio id="win-sound" src="win.mp3"></audio>

  <script>
    const mots = [
      { mot: "amour", lettre: "A" },
      { mot: "japon", lettre: "L" },
      { mot: "animaux", lettre: "I" },
      { mot: "mignonne", lettre: "√â" }
    ];

    let etape = 0;
    let lettresTrouv√©es = [];
    let timerInterval;
    let timeLeft = 120; // 2 minutes

    const guessInput = document.getElementById("guess");
    const resultDiv = document.getElementById("result");
    const messageDiv = document.getElementById("message");
    const instruction = document.getElementById("instruction");
    const lettersDiv = document.getElementById("secretLetters");
    const timerDisplay = document.getElementById("timer");
    const rejouerBtn = document.getElementById("rejouer");

    const successSound = document.getElementById("success-sound");
    const errorSound = document.getElementById("error-sound");
    const winSound = document.getElementById("win-sound");

    function startTimer() {
      clearInterval(timerInterval);
      timeLeft = 120;
      updateTimer();
      timerInterval = setInterval(() => {
        timeLeft--;
        updateTimer();
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          messageDiv.innerHTML = "‚è∞ Temps √©coul√© ! Passage au mot suivant.";
          etape++;
          if (etape < mots.length) {
            instruction.innerText = `√âtape ${etape + 1} : Nouveau mot √† deviner`;
            guessInput.value = "";
            resultDiv.innerHTML = "";
            startTimer();
          } else {
            montrerMotFinal();
          }
        }
      }, 1000);
    }

    function updateTimer() {
      const min = Math.floor(timeLeft / 60);
      const sec = timeLeft % 60;
      timerDisplay.innerText = `Temps restant : ${min}:${sec.toString().padStart(2, "0")}`;
    }

    function verifierMotus() {
      const guess = guessInput.value.toLowerCase();
      const motActuel = mots[etape].mot;
      resultDiv.innerHTML = "";
      messageDiv.innerHTML = "";

      if (guess.length !== motActuel.length) {
        messageDiv.innerText = `Le mot doit contenir ${motActuel.length} lettres.`;
        return;
      }

      let correct = 0;
      let affichage = "";

      for (let i = 0; i < guess.length; i++) {
        if (guess[i] === motActuel[i]) {
          affichage += `<span class="green">${guess[i]}</span>`;
          correct++;
        } else if (motActuel.includes(guess[i])) {
          affichage += `<span class="orange">${guess[i]}</span>`;
        } else {
          affichage += `<span class="gray">${guess[i]}</span>`;
        }
      }

      resultDiv.innerHTML = affichage;

      if (correct === motActuel.length) {
        successSound.play();
        lettresTrouv√©es.push(mots[etape].lettre);
        messageDiv.innerHTML = `‚úÖ Bien jou√© ! Lettre gagn√©e : <strong>${mots[etape].lettre}</strong>`;
        etape++;
        clearInterval(timerInterval);

        if (etape < mots.length) {
          instruction.innerText = `√âtape ${etape + 1} : Nouveau mot √† deviner`;
          guessInput.value = "";
          startTimer();
        } else {
          montrerMotFinal();
        }
      } else {
        errorSound.play();
        messageDiv.innerText = "‚ùå Essaie encore.";
      }
    }

    function montrerMotFinal() {
      instruction.innerHTML = `üéÅ Tu as gagn√© 4 lettres. Trouve le pr√©nom final :`;
      const lettresMelang√©es = ["A", "L", "I", "√â"];
      lettersDiv.innerHTML = lettresMelang√©es.map(l => `<span>_</span>`).join(" ");
      guessInput.value = "";
      guessInput.placeholder = "Tape le pr√©nom final";
      guessInput.onkeydown = (e) => {
        if (e.key === "Enter") verifierMotFinal();
      };
      updateTimer(0);
      timerDisplay.classList.add("hidden");
    }

    function verifierMotFinal() {
      const finalGuess = guessInput.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
      const solution = "ilea"; // sans accent

      if (finalGuess === solution) {
        lettersDiv.innerHTML = `<span class="green">I</span><span class="green">L</span><span class="green">√â</span><span class="green">A</span>`;
        messageDiv.innerHTML = "üèÜ Bravo ! Tu as trouv√© le pr√©nom secret : <strong>Il√©a</strong> üíñ";
        winSound.play();
        rejouerBtn.classList.remove("hidden");
      } else {
        errorSound.play();
        messageDiv.innerHTML = "üò¢ Mauvais ordre. R√©essaye !";
      }
    }

    guessInput.addEventListener("keydown", function (e) {
      if (e.key === "Enter" && etape < mots.length) {
        verifierMotus();
      }
    });

    startTimer();
  </script>
</body>
</html>
<!-- Sons -->
<audio id="success-sound" src="success.mp3"></audio>
<audio id="error-sound" src="error.mp3"></audio>
<audio id="win-sound" src="win.mp3"></audio>
